<!DOCTYPE html>
<html lang="pt-BR">
<head><meta charset="UTF-8"><title>Desafio 7: Upload</title><link rel="stylesheet" href="style.css"></head>
<body>
    <div class="container">
        <h1>Upload de Arquivos</h1>
        <div class="info-box">
            <h4>ðŸŽ¯ Objetivo: ManipulaÃ§Ã£o de Input File</h4>
            <p>Envie um arquivo (.pdf, .jpg, .png). O input muitas vezes Ã© oculto ou difÃ­cil de clicar.</p>
        </div>

        <div class="upload-area">
            <input type="file" id="file-input" accept=".pdf, .jpg, .png">
            <p id="file-name-display" style="margin-top: 10px; color: #555; font-style: italic;"></p>
        </div>

        <button id="upload-btn" onclick="startUpload()" disabled>Enviar Arquivo</button>

        <div class="progress-container" id="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <p id="upload-status" style="margin-top: 10px; font-weight: bold;"></p>

        <br><a href="dashboard.html">Voltar ao Dashboard</a>
    </div>

    <script>
        if (!localStorage.getItem('token')) window.location.href = 'index.html';

        const fileInput = document.getElementById('file-input');
        const uploadBtn = document.getElementById('upload-btn');
        const fileNameDisplay = document.getElementById('file-name-display');

        fileInput.addEventListener('change', function() {
            const file = this.files[0];
            if (file) {
                const validExtensions = ['pdf', 'jpg', 'png'];
                const extension = file.name.split('.').pop().toLowerCase();
                
                if (!validExtensions.includes(extension)) {
                    alert("Formato de arquivo invÃ¡lido! Apenas PDF, JPG ou PNG.");
                    this.value = ''; // Limpa input
                    uploadBtn.disabled = true;
                    fileNameDisplay.innerText = '';
                } else {
                    uploadBtn.disabled = false;
                    fileNameDisplay.innerText = `Selecionado: ${file.name}`;
                }
            }
        });

        function startUpload() {
            const progressBar = document.getElementById('progress-bar');
            const container = document.getElementById('progress-container');
            container.style.display = 'block';
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    document.getElementById('upload-status').innerText = `Upload concluÃ­do: ${fileInput.files[0].name}`;
                    document.getElementById('upload-status').style.color = '#27ae60';
                } else {
                    width += 5;
                    progressBar.style.width = width + '%';
                }
            }, 100); // Simula 2 segundos (20 * 100ms)
        }
    </script>
</body></html>